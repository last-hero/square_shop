<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Redaxo Addon - Online Shop FE: IpnListener Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Redaxo Addon - Online Shop FE
   &#160;<span id="projectnumber">0.6</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">IpnListener Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a712cbcaf1f7766fc87d73e34df43f505"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ipn_listener.html#a712cbcaf1f7766fc87d73e34df43f505">getPostUri</a> ()</td></tr>
<tr class="separator:a712cbcaf1f7766fc87d73e34df43f505"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c907e8af775e517a77037dd0164222f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ipn_listener.html#a6c907e8af775e517a77037dd0164222f">getResponse</a> ()</td></tr>
<tr class="separator:a6c907e8af775e517a77037dd0164222f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4aa92fe8e0e09564d44ec1cd3e44ec21"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ipn_listener.html#a4aa92fe8e0e09564d44ec1cd3e44ec21">getResponseStatus</a> ()</td></tr>
<tr class="separator:a4aa92fe8e0e09564d44ec1cd3e44ec21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef2ed50a06606f20cd65afbd4cc9842b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ipn_listener.html#aef2ed50a06606f20cd65afbd4cc9842b">getTextReport</a> ()</td></tr>
<tr class="separator:aef2ed50a06606f20cd65afbd4cc9842b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b16e90fc221dd39019deb792cce8a6b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ipn_listener.html#a7b16e90fc221dd39019deb792cce8a6b">processIpn</a> ($post_data=null)</td></tr>
<tr class="separator:a7b16e90fc221dd39019deb792cce8a6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5360f1e64b4b04fb1fedca46c7d8617c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ipn_listener.html#a5360f1e64b4b04fb1fedca46c7d8617c">requirePostMethod</a> ()</td></tr>
<tr class="separator:a5360f1e64b4b04fb1fedca46c7d8617c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a372c0672391a16e4902e172ea3a0ae63"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a372c0672391a16e4902e172ea3a0ae63"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$use_curl</b> = true</td></tr>
<tr class="separator:a372c0672391a16e4902e172ea3a0ae63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab68b747f2522b1e5f6437d2c5ff9adfb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab68b747f2522b1e5f6437d2c5ff9adfb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$force_ssl_v3</b> = true</td></tr>
<tr class="separator:ab68b747f2522b1e5f6437d2c5ff9adfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeface1a6e4ca1dae1ea373f0eaa874f8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeface1a6e4ca1dae1ea373f0eaa874f8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$follow_location</b> = false</td></tr>
<tr class="separator:aeface1a6e4ca1dae1ea373f0eaa874f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06f243df7c41e2fe43951c13e6fab839"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a06f243df7c41e2fe43951c13e6fab839"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$use_ssl</b> = true</td></tr>
<tr class="separator:a06f243df7c41e2fe43951c13e6fab839"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af23af3972bee7c304d1bc4d6ce4ad248"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af23af3972bee7c304d1bc4d6ce4ad248"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$use_sandbox</b> = false</td></tr>
<tr class="separator:af23af3972bee7c304d1bc4d6ce4ad248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84320a9bf3e591d7ae20dfcb0dfe6a0d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a84320a9bf3e591d7ae20dfcb0dfe6a0d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$timeout</b> = 30</td></tr>
<tr class="separator:a84320a9bf3e591d7ae20dfcb0dfe6a0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e55faf0bc8a87f625ec34270cfc9170"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2e55faf0bc8a87f625ec34270cfc9170"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>PAYPAL_HOST</b> = 'www.paypal.com'</td></tr>
<tr class="separator:a2e55faf0bc8a87f625ec34270cfc9170"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55f5bde6a901c85caf72e41b4c7beae4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a55f5bde6a901c85caf72e41b4c7beae4"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>SANDBOX_HOST</b> = 'www.sandbox.paypal.com'</td></tr>
<tr class="separator:a55f5bde6a901c85caf72e41b4c7beae4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a9ced22afbe404ed771ed90a70b7fd031"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ipn_listener.html#a9ced22afbe404ed771ed90a70b7fd031">curlPost</a> ($encoded_data)</td></tr>
<tr class="separator:a9ced22afbe404ed771ed90a70b7fd031"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8622ebd09910a0145fda0217d3612d5a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ipn_listener.html#a8622ebd09910a0145fda0217d3612d5a">fsockPost</a> ($encoded_data)</td></tr>
<tr class="separator:a8622ebd09910a0145fda0217d3612d5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a9ced22afbe404ed771ed90a70b7fd031"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">curlPost </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$encoded_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Post Back Using cURL</p>
<p>Sends the post back to PayPal using the cURL library. Called by the <a class="el" href="class_ipn_listener.html#a7b16e90fc221dd39019deb792cce8a6b">processIpn()</a> method if the use_curl property is true. Throws an exception if the post fails. Populates the response, response_status, and post_uri properties on success.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">string</td><td>The post data as a URL encoded string </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8622ebd09910a0145fda0217d3612d5a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fsockPost </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$encoded_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Post Back Using fsockopen()</p>
<p>Sends the post back to PayPal using the fsockopen() function. Called by the <a class="el" href="class_ipn_listener.html#a7b16e90fc221dd39019deb792cce8a6b">processIpn()</a> method if the use_curl property is false. Throws an exception if the post fails. Populates the response, response_status, and post_uri properties on success.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">string</td><td>The post data as a URL encoded string </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a712cbcaf1f7766fc87d73e34df43f505"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getPostUri </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get POST URI</p>
<p>Returns the URI that was used to send the post back to PayPal. This can be useful for troubleshooting connection problems. The default URI would be "ssl://www.sandbox.paypal.com:443/cgi-bin/webscr"</p>
<dl class="section return"><dt>Returns</dt><dd>string </dd></dl>

</div>
</div>
<a class="anchor" id="a6c907e8af775e517a77037dd0164222f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getResponse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get Response</p>
<p>Returns the entire response from PayPal as a string including all the HTTP headers.</p>
<dl class="section return"><dt>Returns</dt><dd>string </dd></dl>

</div>
</div>
<a class="anchor" id="a4aa92fe8e0e09564d44ec1cd3e44ec21"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getResponseStatus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get Response Status</p>
<p>Returns the HTTP response status code from PayPal. This should be "200" if the post back was successful.</p>
<dl class="section return"><dt>Returns</dt><dd>string </dd></dl>

</div>
</div>
<a class="anchor" id="aef2ed50a06606f20cd65afbd4cc9842b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getTextReport </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get Text Report</p>
<p>Returns a report of the IPN transaction in plain text format. This is useful in emails to order processors and system administrators. Override this method in your own class to customize the report.</p>
<dl class="section return"><dt>Returns</dt><dd>string </dd></dl>

</div>
</div>
<a class="anchor" id="a7b16e90fc221dd39019deb792cce8a6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">processIpn </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$post_data</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Process IPN</p>
<p>Handles the IPN post back to PayPal and parsing the response. Call this method from your IPN listener script. Returns true if the response came back as "VERIFIED", false if the response came back "INVALID", and throws an exception if there is an error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

</div>
</div>
<a class="anchor" id="a5360f1e64b4b04fb1fedca46c7d8617c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">requirePostMethod </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Require Post Method</p>
<p>Throws an exception and sets a HTTP 405 response header if the request method was not POST. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>B:/p2/redaxo/include/addons/square_shop/classes/helper/IpnListener.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Dec 26 2014 16:12:02 for Redaxo Addon - Online Shop FE by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
